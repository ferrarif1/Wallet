{"ast":null,"code":"'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar bip39 = require('bip39');\nvar hdkey = require('ethereumjs-wallet/hdkey');\nvar Transaction = require('ethereumjs-tx');\nvar EthCrypto = require('eth-crypto');\nvar isBuffer = require('is-buffer');\nvar Wallet = function () {\n  function Wallet(seed) {\n    var hdpath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    _classCallCheck(this, Wallet);\n    var value = null;\n    if (typeof seed === 'string') {\n      value = Buffer.from(seed);\n    } else if (isBuffer(seed)) {\n      value = seed;\n    } else {\n      throw new Error('Seed must be Buffer or string');\n    }\n    this.__hdwallet = hdkey.fromMasterSeed(value);\n    this.__hdpath = hdpath;\n  }\n  _createClass(Wallet, [{\n    key: 'hdpath',\n    value: function hdpath() {\n      return this.__hdpath;\n    }\n  }, {\n    key: 'getAddress',\n    value: function getAddress() {\n      return this.__hdwallet.derivePath(this.__hdpath).getWallet().getAddress();\n    }\n  }, {\n    key: 'getPublicKey',\n    value: function getPublicKey() {\n      var compress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var uncompressed = this.__hdwallet.derivePath(this.__hdpath).getWallet().getPublicKey();\n      if (compress) {\n        return Buffer.from(EthCrypto.publicKey.compress(uncompressed.toString('hex')), 'hex');\n      }\n      return uncompressed;\n    }\n  }, {\n    key: 'getPrivateKey',\n    value: function getPrivateKey() {\n      return this.__hdwallet.derivePath(this.__hdpath).getWallet().getPrivateKey();\n    }\n  }, {\n    key: 'signTransaction',\n    value: function signTransaction(txParams) {\n      var wallet = this.__hdwallet.derivePath(this.__hdpath).getWallet();\n      txParams.from = txParams.from || '0x' + wallet.getAddress().toString('hex');\n      var tx = new Transaction(txParams);\n      var priv = wallet.getPrivateKey();\n      tx.sign(priv);\n      return tx.serialize();\n    }\n  }, {\n    key: 'derive',\n    value: function derive(hdpath) {\n      if ((typeof hdpath === 'undefined' ? 'undefined' : _typeof(hdpath)) === undefined) return this;\n      var clone = Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n      if (/^[0-9]+'?$/.test(hdpath)) {\n        hdpath = '/' + hdpath;\n      }\n      clone.__hdpath = this.__hdpath + hdpath;\n      return clone;\n    }\n  }]);\n  return Wallet;\n}();\nvar HDWallet = {\n  fromMnemonic: function fromMnemonic(mnemonic) {\n    var value = null;\n    if (isBuffer(mnemonic)) {\n      value = mnemonic.toString();\n    } else {\n      value = mnemonic;\n    }\n    var seed = bip39.mnemonicToSeedSync(value.trim());\n    return new Wallet(seed);\n  },\n  fromSeed: function fromSeed(seed) {\n    return new Wallet(seed);\n  },\n  DefaultHDPath: 'm/44\\'/60\\'/0\\'/0'\n};\nif (typeof window !== 'undefined') {\n  window.HDWallet = HDWallet;\n}\nmodule.exports = HDWallet;","map":{"version":3,"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","bip39","require","hdkey","Transaction","EthCrypto","isBuffer","Wallet","seed","hdpath","arguments","undefined","value","Buffer","from","Error","__hdwallet","fromMasterSeed","__hdpath","getAddress","derivePath","getWallet","getPublicKey","compress","uncompressed","publicKey","toString","getPrivateKey","signTransaction","txParams","wallet","tx","priv","sign","serialize","derive","clone","assign","create","getPrototypeOf","test","HDWallet","fromMnemonic","mnemonic","mnemonicToSeedSync","trim","fromSeed","DefaultHDPath","window","module","exports"],"sources":["/Users/zhangyuanyi/Downloads/Wallet/walletdemo/node_modules/ethereum-hdwallet/dist/index.js"],"sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar bip39 = require('bip39');\nvar hdkey = require('ethereumjs-wallet/hdkey');\nvar Transaction = require('ethereumjs-tx');\nvar EthCrypto = require('eth-crypto');\nvar isBuffer = require('is-buffer');\n\nvar Wallet = function () {\n  function Wallet(seed) {\n    var hdpath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n    _classCallCheck(this, Wallet);\n\n    var value = null;\n    if (typeof seed === 'string') {\n      value = Buffer.from(seed);\n    } else if (isBuffer(seed)) {\n      value = seed;\n    } else {\n      throw new Error('Seed must be Buffer or string');\n    }\n\n    this.__hdwallet = hdkey.fromMasterSeed(value);\n    this.__hdpath = hdpath;\n  }\n\n  _createClass(Wallet, [{\n    key: 'hdpath',\n    value: function hdpath() {\n      return this.__hdpath;\n    }\n  }, {\n    key: 'getAddress',\n    value: function getAddress() {\n      return this.__hdwallet.derivePath(this.__hdpath).getWallet().getAddress();\n    }\n  }, {\n    key: 'getPublicKey',\n    value: function getPublicKey() {\n      var compress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      var uncompressed = this.__hdwallet.derivePath(this.__hdpath).getWallet().getPublicKey();\n      if (compress) {\n        return Buffer.from(EthCrypto.publicKey.compress(uncompressed.toString('hex')), 'hex');\n      }\n      return uncompressed;\n    }\n  }, {\n    key: 'getPrivateKey',\n    value: function getPrivateKey() {\n      return this.__hdwallet.derivePath(this.__hdpath).getWallet().getPrivateKey();\n    }\n  }, {\n    key: 'signTransaction',\n    value: function signTransaction(txParams) {\n      var wallet = this.__hdwallet.derivePath(this.__hdpath).getWallet();\n      txParams.from = txParams.from || '0x' + wallet.getAddress().toString('hex');\n      var tx = new Transaction(txParams);\n      var priv = wallet.getPrivateKey();\n      tx.sign(priv);\n      return tx.serialize();\n    }\n  }, {\n    key: 'derive',\n    value: function derive(hdpath) {\n      if ((typeof hdpath === 'undefined' ? 'undefined' : _typeof(hdpath)) === undefined) return this;\n      var clone = Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n      if (/^[0-9]+'?$/.test(hdpath)) {\n        hdpath = '/' + hdpath;\n      }\n      clone.__hdpath = this.__hdpath + hdpath;\n      return clone;\n    }\n  }]);\n\n  return Wallet;\n}();\n\nvar HDWallet = {\n  fromMnemonic: function fromMnemonic(mnemonic) {\n    var value = null;\n    if (isBuffer(mnemonic)) {\n      value = mnemonic.toString();\n    } else {\n      value = mnemonic;\n    }\n\n    var seed = bip39.mnemonicToSeedSync(value.trim());\n    return new Wallet(seed);\n  },\n  fromSeed: function fromSeed(seed) {\n    return new Wallet(seed);\n  },\n  DefaultHDPath: 'm/44\\'/60\\'/0\\'/0'\n};\n\nif (typeof window !== 'undefined') {\n  window.HDWallet = HDWallet;\n}\n\nmodule.exports = HDWallet;"],"mappings":"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"},"metadata":{},"sourceType":"script"}